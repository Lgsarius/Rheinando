<!DOCTYPE html>
<html>
<head>
    <title>Rheinando</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
</head>
<style>
.top-bar {
    background-color: #fcfcfc;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 10px 10px -10px rgba(0, 0, 0, 0.3);
    padding: 10px;
}
._1sMed {
    display: flex;
    align-items: center;
    padding: 20px;
}
._1rrtYr {
    display: flex;
    align-items: center;
    gap: 10px; /* Ã„ndern Sie diesen Wert, um den Abstand zwischen den Elementen zu steuern */
}
.ygmw2 {
    display: flex;
    align-items: center;
    gap: 10px; /* Ã„ndern Sie diesen Wert, um den Abstand zwischen den Elementen zu steuern */
}
._17Gwrq {
    display: flex;
    align-items: center;
    gap: 10px; /* Ã„ndern Sie diesen Wert, um den Abstand zwischen den Elementen zu steuern */
}
.top-bar h1 {
    margin-left: 20px;
} 
body {
 font-family: JETSansDigital,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Arial,sans-serif;
  background: linear-gradient(280deg, #FF8001 50%,  #F5F3F1 20%);
  z-index: 1;
  height: 100vh;
}

.background-image {
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: -1;
    animation: pulse 2s linear infinite;
}
@-webkit-keyframes "pulse" {

    50% {
       -webkit-transform: scale(0.8);
       transform: scale(0.8);
    }
    100% {
        -webkit-transform: scale(1);
       transform: scale(1);
    }
    }
    .card {
        box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
        transition: 0.3s;
    }
    .col {
        flex: 0 0 50%;
        max-width: 50%;
    }
    .card:hover {
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
    }

    .card-body {
        padding: 16px;
    }
    .col-2 {
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 16px;
        margin: 16px;
        box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
        background-color: #fff;
        transition: 0.3s;
    }

    .col:hover {
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
    }
</style>
<body>
    <div class="top-bar">
        <img src="{{ url_for('static', filename='RHEINANDO.png') }}" alt="Rheinando Logo" width="180" height="60">
        <span class="ygmw2">
            <div class="_1sMed _1wlHd _2cDMI" data-qa="flex">
                <svg xmlns="http://www.w3.org/2000/svg" role="presentation" focusable="false" fill="var(--xds-color-content-default)" viewBox="0 0 16 16" class="c-pieIcon c-pieIcon--office" width="24" height="24">
                    <path d="M12.375 2.094h-8.75a1.54 1.54 0 0 0-1.531 1.531v10.281h11.812V3.625a1.54 1.54 0 0 0-1.531-1.531Zm.219 10.5H8.656v-1.969H7.344v1.969H3.406V3.625a.219.219 0 0 1 .219-.219h8.75a.219.219 0 0 1 .219.219v8.969Zm-3.719-7h1.75v1.312h-1.75V5.594Zm-3.5 0h1.75v1.312h-1.75V5.594Zm3.5 2.625h1.75V9.53h-1.75V8.22Zm-3.5 0h1.75V9.53h-1.75V8.22Z"></path>
                </svg>
                <div data-qa="util" style="margin-left: var(--xds-spacing-b);">
                    <b class="rWs5G" data-qa="text" style="color: var(--xds-color-content-default);">Firmenbestellungen</b>
                </div>
                
                <span class="ygmw2"><div class="_1sMed _1wlHd _2cDMI" data-qa="flex"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" focusable="false" fill="var(--xds-color-content-default)" viewBox="0 0 16 16" class="c-pieIcon c-pieIcon--moped" width="24" height="24"><path d="M14.072 9.802a2.354 2.354 0 0 0-1.697-.682c.06-.31.06-.627 0-.936l-1.75-5.872A1.514 1.514 0 0 0 9.102 1.22H6.355L7.02 2.53h2.082a.228.228 0 0 1 .21.158l1.75 5.871a1.102 1.102 0 0 1-.559 1.296c-.152.076-.32.115-.49.113H8.63l-.7-2.503a1.54 1.54 0 0 0-1.487-1.164H2.75a1.54 1.54 0 0 0-1.531 1.532v3.447h1.33a2.354 2.354 0 0 0 .691 1.916 2.39 2.39 0 0 0 3.395 0 2.353 2.353 0 0 0 .691-1.916h2.625v.219a2.406 2.406 0 1 0 4.104-1.698h.018ZM5.708 12.27a1.094 1.094 0 0 1-1.818-.456 1.059 1.059 0 0 1-.02-.533h2.135a1.059 1.059 0 0 1-.298.989ZM2.53 9.969V7.834a.219.219 0 0 1 .219-.219h3.692a.236.236 0 0 1 .22.184l.603 2.17H2.531Zm10.614 2.301a1.103 1.103 0 0 1-1.54 0 1.094 1.094 0 1 1 1.54 0Z"></path></svg><div data-qa="util" style="margin-left: var(--xds-spacing-b);"><b class="rWs5G" data-qa="text" style="color: var(--xds-color-content-default);">Fahrer*in werden</b></div></div></span>
            </div>
            <div class="_1sMed _1wlHd _2cDMI"  data-qa="header-country-and-language-selector"><div class="_1zAcs _3FPiw _5KCX" data-qa="dropdown-dialog"><div class="_2geFc" data-qa="click-away-listener"><div class="_3aZKM"><span class="_3I0XC _2q6ZP oMHlW" aria-label="Land oder Sprache wÃ¤hlen" tabindex="0" role="button" aria-live="polite" aria-busy="false" aria-atomic="true" aria-disabled="false" data-qa="header-country-and-language-selector-action-toggle"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" focusable="false" fill="currentColor" viewBox="0 0 16 16" class="c-pieIcon c-pieIcon--germany" width="24" height="24"><path fill="#FFDA44" d="M1.438 10.435a7.001 7.001 0 0 0 13.127 0L8 9.828l-6.563.607Z"></path><path fill="#333" d="M8.001 1a7.001 7.001 0 0 0-6.563 4.567L8 6.174l6.564-.607A7.001 7.001 0 0 0 8 1Z"></path><path fill="#D80027" d="M1.438 5.567a6.987 6.987 0 0 0 0 4.868h13.127a6.984 6.984 0 0 0 0-4.868H1.438Z"></path></svg></span></div><div></div></div></div></div>
            <div class="_1sMed _1wlHd _2cDMI"  data-qa="header-menu-button"><span class="_3I0XC _2q6ZP oMHlW" aria-label="Mein Account" tabindex="0" role="button" aria-live="polite" aria-busy="false" aria-atomic="true" aria-disabled="false" data-qa="header-menu-button-element"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" focusable="false" fill="currentColor" viewBox="0 0 16 16" class="c-pieIcon c-pieIcon--menu" width="24" height="24"><path d="M15 4.281H1V2.97h14V4.28Zm0 7.438H1v1.312h14V11.72Zm0-4.375H1v1.312h14V7.344Z"></path></svg></span></div>
        </span>
    </div>
    <div class="container">
       
        <h3 class="mt-5">Bestellungen mÃ¼ssen bis 11:00 getÃ¤tigt werden</h3>
        <div style="text-align: right;">
            <img class="background-image" src="{{ url_for('static', filename='RHEINANDOinside.png') }}" alt="Rheinandoinside" width="580" height="540">
        </div>
        <div class="row">
            {% for day, day_meals in meals.items() %}
            <div class="col-2">
                <h4>{{ day }}</h4>
                {% for meal in day_meals %}
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title">{{ meal.user.name }}</h5>
            <p class="card-text">{{ meal.meal }}</p>
                <p class="card-text"><strong>{{ meal.Price }} â‚¬</strong></p>
                <div style="display: inline-block;">
                    <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#editMealModal{{ meal.id }}">
                      <i class="fa fa-pencil"></i>
                    </button>
                  </div>
                  <div style="display: inline-block;">
                    <form method="POST" action="{{ url_for('delete_meal', meal_id=meal.id) }}">
                      <button type="submit" class="btn btn-danger">
                        <i class="fa fa-trash"></i>
                      </button>
                    </form>
                  </div>
            </form>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="editMealModal{{ meal.id }}" tabindex="-1" role="dialog" aria-labelledby="editMealModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                
                <div class="modal-header">
                    <h5 class="modal-title" id="editMealModalLabel">Bestellung bearbeiten</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form method="POST" action="{{ url_for('update_meal', meal_id=meal.id) }}">
                    <div class="modal-body">
                        <div class="form-group">
                        <input type="text" class="form-control" name="meal" value="{{ meal.meal }}">
                        </div>
                        <div class="form-group">
                        <input type="text" class="form-control" name="price" value="{{ meal.Price }}">
                    </div>
                    </div>
                    <div class="modal-footer">
                            <button type="submit" class="btn btn-primary">Speichern</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endfor %}
                <!-- Trigger/Open The Modal -->
                <button type="button" class="btn btn-success" data-toggle="modal" data-target="#myModal{{ loop.index }}">
                    Bestellen
                </button>
                <div style="display: flex; align-items: center;">
                    <h4>ðŸ’¸</h4>
                    <select class="form-control mt-3" id="studentSelect{{ loop.index }}">
                      {% for student in students %}
                      <option value="{{ student.id }}" data-paypal="{{ student.Paypal }}">{{ student.name }}</option>
                      {% endfor %}
                    </select>
                  </div>
                  
                  {% if students %}
                  <img id="paypalEmail{{ loop.index }}" src="{{ url_for('static', filename=students[0].Paypal) }}" style="width: 100px; height: 100px; border-radius: 5px;">
                  {% endif %}
                  
                  <script>
                  document.getElementById('studentSelect{{ loop.index }}').addEventListener('change', function() {
                    var selectedOption = this.options[this.selectedIndex];
                    var paypalEmail = selectedOption.getAttribute('data-paypal');
                    document.getElementById('paypalEmail{{ loop.index }}').src = "{{ url_for('static', filename='') }}" + paypalEmail;
                    document.getElementById('paypalEmail{{ loop.index }}').alt = selectedOption.textContent;
                  });
                  </script>
           
        
                <!-- The Modal -->
                <div class="modal" id="myModal{{ loop.index }}">
                    <div class="modal-dialog">
                        <div class="modal-content">

                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">Deine Bestellung fÃ¼r {{ day }} </h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>

                            <!-- Modal body -->
                            <div class="modal-body">
                                <form method="POST">
                                    <div class="form-group">
                                        <input type="hidden" name="day" value="{{ day }}">
                                       
                                        <div class="form-group">
                                          
                                            <input type="text" class="form-control" id="meal" name="meal" placeholder="Bestellung" required>
                                          </div>
                                          
                                          <div class="form-group">
                                           
                                            <input type="text" class="form-control" id="Price" name="Price" placeholder="Preis">
                                          </div>
                                    </div>
                                    <div style="display: flex; justify-content: center;">
                                        <button type="submit" class="btn btn-success">Bestellen</button>
                                      </div>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>